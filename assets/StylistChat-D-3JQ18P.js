import{r as n,j as e,g as y}from"./klyora.js";const v=["Style an evening drape for a winter gala.","2025 seasonal palette recommendations.","Tailoring advice for silk materials.","Minimalist aesthetic gift curation."],N=({isOpen:h,onClose:p})=>{const[a,c]=n.useState([{role:"model",text:"Welcome to the Maison Klyora Atelier. I am your concierge stylist. How may I refine your ensemble today?"}]),[o,u]=n.useState(""),[i,b]=n.useState(!1),d=n.useRef(null);n.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[a,i]);const f=async t=>{if(i)return;const s={role:"user",text:t};c(l=>[...l,s]),u(""),b(!0);const g={role:"model",text:""};c(l=>[...l,g]);try{const l=y.getStylistResponseStream(a,t);let x="";for await(const r of l)x+=r,c(j=>{const m=[...j];return m[m.length-1]={role:"model",text:x},m})}catch{c(x=>{const r=[...x];return r[r.length-1]={role:"model",text:"I apologize, our boutique server is momentarily offline. Please inquire again shortly."},r})}finally{b(!1)}};return h?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md animate-fade-in",onClick:p}),e.jsxs("div",{className:"relative w-full max-w-xl bg-white h-full flex flex-col shadow-[0_0_80px_rgba(0,0,0,0.15)] animate-slide-right overflow-hidden",children:[e.jsxs("div",{className:"p-10 md:p-14 border-b border-black/5 bg-white flex justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[10px] uppercase tracking-[0.6em] font-bold text-black mb-2",children:"Concierge Stylist"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#8ca67a] animate-pulse"}),e.jsx("span",{className:"text-[8px] uppercase tracking-[0.3em] text-zinc-400 font-bold",children:"Atelier Service Online"})]})]}),e.jsxs("button",{onClick:p,className:"group flex items-center gap-4 text-[9px] uppercase font-bold tracking-[0.4em] hover:opacity-50 transition-all",children:["EXIT ",e.jsx("div",{className:"w-8 h-[1px] bg-black group-hover:w-12 transition-all"})]})]}),e.jsxs("div",{ref:d,className:"flex-1 overflow-y-auto p-10 md:p-14 space-y-12 no-scrollbar bg-[#fcfcfc]",children:[a.map((t,s)=>e.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"} animate-fade-in-up`,children:e.jsxs("div",{className:`max-w-[90%] relative ${t.role==="user"?"text-right":"text-left"}`,children:[t.role==="model"&&e.jsx("span",{className:"text-[7px] uppercase tracking-[0.5em] text-[#8ca67a] font-bold block mb-3",children:"Maison Klyora Stylist"}),e.jsx("div",{className:`p-8 ${t.role==="user"?"bg-black text-white shadow-xl":"bg-white border border-black/5 text-zinc-800 shadow-sm"}`,children:e.jsx("p",{className:"text-[13px] leading-relaxed tracking-wide uppercase font-light font-serif italic",children:t.text||(i&&s===a.length-1?"...":"")})}),t.role==="user"&&e.jsx("span",{className:"text-[7px] uppercase tracking-[0.5em] text-zinc-300 font-bold block mt-3",children:"Verified Client"})]})},s)),i&&a[a.length-1].text===""&&e.jsx("div",{className:"flex justify-start animate-pulse",children:e.jsxs("div",{className:"bg-white border border-black/5 p-8 flex gap-2",children:[e.jsx("div",{className:"w-1 h-1 bg-black rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-black rounded-full animate-bounce [animation-delay:0.2s]"}),e.jsx("div",{className:"w-1 h-1 bg-black rounded-full animate-bounce [animation-delay:0.4s]"})]})})]}),e.jsxs("div",{className:"p-10 md:p-14 border-t border-black/5 bg-white space-y-10",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:v.map((t,s)=>e.jsx("button",{onClick:()=>f(t),className:"px-5 py-3 border border-black/5 text-[8px] uppercase tracking-widest font-bold hover:bg-black hover:text-white transition-all text-zinc-400",children:t},s))}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),o.trim()&&f(o)},className:"flex gap-6 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{className:"text-[7px] uppercase tracking-[0.5em] text-zinc-300 font-bold block mb-3",children:"Inquire At Atelier"}),e.jsx("input",{type:"text",value:o,onChange:t=>u(t.target.value),placeholder:"WHAT SILHOUETTE ARE YOU SEEKING?",className:"w-full text-[11px] uppercase tracking-[0.3em] border-b border-black/10 outline-none focus:border-black py-4 transition-all bg-transparent font-medium"})]}),e.jsx("button",{type:"submit",disabled:i||!o.trim(),className:"px-10 py-5 bg-black text-white text-[9px] font-bold uppercase tracking-[0.5em] hover:bg-zinc-800 transition-all disabled:opacity-20 shadow-xl",children:"SEND"})]}),e.jsx("p",{className:"text-[7px] uppercase tracking-[0.3em] text-zinc-400 text-center font-medium opacity-50",children:"Klyora Digital Boutique Concierge | ID: AT-2025"})]})]})]}):null};export{N as StylistChat};
